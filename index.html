<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ù†ØµØ© ØªØ¨Ø§Ø¯Ù„ Ø±Ù‚Ù…ÙŠØ© Ø¢Ù…Ù†Ø©</title>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-storage.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #f2f2f2; padding: 30px; direction: rtl; }
    h1, h2 { color: #222; text-align: center; }
    form, .terms, .admin-panel { background: #fff; padding: 25px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); max-width: 800px; margin: 30px auto; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    textarea, input, select { width: 100%; padding: 12px; margin-top: 5px; border-radius: 6px; border: 1px solid #ccc; }
    button { margin-top: 20px; padding: 12px 25px; background-color: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background-color: #0056b3; }
    .note, .wallets { font-size: 0.9em; color: #555; margin-top: 10px; }
    .wallets strong { color: #000; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
    th { background-color: #007bff; color: white; }
    .accept { background-color: #28a745; color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; }
    .reject { background-color: #dc3545; color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>

  <h1>Ù…Ù†ØµØ© ØªØ¨Ø§Ø¯Ù„ Ø±Ù‚Ù…ÙŠØ© Ø¢Ù…Ù†Ø©</h1>
  <p style="text-align:center;">ØªØ¨Ø§Ø¯Ù„ Ø­Ø³Ø§Ø¨Ø§ØªØŒ Ø£ÙƒÙˆØ§Ø¯ØŒ Ø¨Ø·Ø§Ù‚Ø§Øª Ø±Ù‚Ù…ÙŠØ© Ø¨ÙŠÙ† Ø·Ø±ÙÙŠÙ† Ù…Ø¹ Ø¶Ù…Ø§Ù† Ø¶Ø¯ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„</p>

  <form id="exchangeForm">
    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ Ø³ØªÙ‚Ø¯Ù…Ù‡:</label>
    <select name="content_type" required>
      <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</option>
      <option value="Ø­Ø³Ø§Ø¨">Ø­Ø³Ø§Ø¨</option>
      <option value="ÙƒÙˆØ¯ Ø¨Ø·Ø§Ù‚Ø©">ÙƒÙˆØ¯ Ø¨Ø·Ø§Ù‚Ø©</option>
      <option value="Ø±ØµÙŠØ¯">Ø±ØµÙŠØ¯</option>
      <option value="Ø¢Ø®Ø±">Ø¢Ø®Ø±</option>
    </select>

    <label>Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø³ØªÙ‚Ø¯Ù…Ù‡ Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø±ØŸ</label>
    <textarea name="you_offer" required></textarea>

    <label>Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡ Ø¨Ø§Ù„Ù…Ù‚Ø§Ø¨Ù„ØŸ</label>
    <textarea name="you_expect" required></textarea>

    <label>Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„ØªÙˆØ§ØµÙ„:</label>
    <input type="email" name="email" required>

    <label>Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ (ØµÙˆØ±Ø© Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©):</label>
    <input type="file" name="payment_proof" accept="image/*" required>

    <div class="wallets">
      <p>ğŸ’° <strong>Ø±Ø³ÙˆÙ… Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> 1 Ø¯ÙˆÙ„Ø§Ø± ØªÙØ¯ÙØ¹ Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</p>
      <p>ğŸ”— <strong>Binance ID:</strong> 1045068221</p>
      <p>ğŸ’³ <strong>Bybit ID:</strong> 419983068</p>
      <p class="note">ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³ÙˆÙ… Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (ID)ØŒ ÙˆÙ„ÙŠØ³ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©.</p>
    </div>

    <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    <div class="note">Ø³ÙŠØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¤Ù‚ØªÙ‹Ø§ Ø­ØªÙ‰ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ø±ÙÙŠÙ†. ÙÙŠ Ø­Ø§Ù„ Ø§Ù„Ø§Ù†Ø³Ø­Ø§Ø¨ØŒ ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</div>
  </form>

  <div class="terms">
    <h3>ğŸ“œ Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h3>
    <ul>
      <li>Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ¹Ù…Ù„ ÙƒÙˆØ³ÙŠØ· ÙÙ‚Ø· ÙˆÙ„Ø§ ÙŠØªØ­Ù…Ù„ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø£Ùˆ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª.</li>
      <li>ÙŠÙÙ…Ù†Ø¹ ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ø£Ùˆ Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø³Ø© Ø£Ùˆ Ø®Ø§ØµØ©.</li>
      <li>ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ Ø®Ù„Ø§Ù„ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯ØŒ ÙŠØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</li>
      <li>ÙŠØ¬Ø¨ Ø¯ÙØ¹ Ø±Ø³ÙˆÙ… Ø§Ù„Ø®Ø¯Ù…Ø© Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ ÙˆØ¥Ø±ÙØ§Ù‚ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹.</li>
    </ul>
  </div>

  <div class="admin-panel">
    <h2>ğŸ“‹ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù</h2>
    <table id="requestsTable">
      <thead>
        <tr>
          <th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</th>
          <th>Ù…Ø§ ÙŠÙ‚Ø¯Ù…Ù‡</th>
          <th>Ù…Ø§ ÙŠØ±ÙŠØ¯Ù‡</th>
          <th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
          <th>Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDmfies8d_RzxXv0WRSjm3G19a6Xxqq_70",
      authDomain: "tebedl.firebaseapp.com",
      projectId: "tebedl",
      storageBucket: "tebedl.appspot.com",
      messagingSenderId: "725353899127",
      appId: "1:725353899127:web:6ecf5dbff260fe89a6d272",
      measurementId: "G-WLRWVBFDDG"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();

    document.getElementById("exchangeForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const contentType = e.target.content_type.value;
      const youOffer = e.target.you_offer.value;
      const youExpect = e.target.you_expect.value;
      const email = e.target.email.value;
      const file = e.target.payment_proof.files[0];

      if (!file) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø±ÙØ§Ù‚ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹.");

      try {
        const storageRef = storage.ref().child("proofs/" + Date.now() + "_" + file.name);
        await storageRef.put(file);
        const fileURL = await storageRef.getDownloadURL();

        await db.collection("requests").add({
          contentType,
          youOffer,
          youExpect,
          email,
          paymentProofURL: fileURL,
          status: "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
        e.target.reset();
      } catch (error) {
        console.error("âŒ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:", error);
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨.");
      }
    });

    const tableBody = document.querySelector("#requestsTable tbody");

    function renderRequest(doc) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${doc.data().contentType}</td>
        <td>${doc.data().youOffer}</td>
        <td>${doc.data().youExpect}</td>
        <td>${doc.data().email}</td>
        <td><a href="${doc.data().paymentProofURL}" target="_blank">Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø©</a></td>
        <td>${doc.data().status || "Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"}</td>
        <td>
          <button class="accept">Ù‚Ø¨ÙˆÙ„</button>
          <button class="reject">Ø±ÙØ¶</button>
        </td>
      `;

      row.querySelector(".accept").onclick = () => {
        db.collection("requests").doc(doc.id).update({ status: "Ù…Ù‚Ø¨ÙˆÙ„" });
        row.cells[5].textContent = "Ù…Ù‚Ø¨ÙˆÙ„";
      };

      row.querySelector(".reject").onclick = () => {
        db.collection("requests").doc(doc.id).update({ status: "Ù…Ø±ÙÙˆØ¶" });
        row.cells[5].textContent = "Ù…Ø±ÙÙˆØ¶";
      };

      tableBody.appendChild(row);
    }

    db.collection("requests").orderBy("timestamp", "desc").get().then(snapshot => {
      snapshot.forEach(doc => renderRequest(doc));
    });
  </script>

</body>
</html>

